<PlayerUI>:
    orientation: "vertical"
    padding: 10
    spacing: 10

    # 1. Title Status Bar
    Label:
        id: title_status
        text: "Select a song"
        font_size: 20
        size_hint_y: None
        height: 40

    # 2Ô∏è. Metadata Grid
    GridLayout:
        cols: 3
        spacing: 5
        size_hint_y: None
        height: 120

        Label:
            text: "Title:"
        TextInput:
            id: title_input

        Label:
            text: "Album:"
        TextInput:
            id: album_input

        Label:
            text: "Performer:"
        TextInput:
            id: performer_input

        Label:
            text: "Year:"
        TextInput:
            id: year_input

        Image:
            id: cover
            source: "default_cover.jpg"
            size_hint: None, None
            size: 100, 100

    # 3. Slider Row
    BoxLayout:
        size_hint_y: None
        height: 50
        spacing: 10  # Adds some space between elements

        Slider:
            id: progress_slider
            min: 0
            max: 100
            on_touch_up: root.seek_in_song(self, args[1])

        Label:
            id: current_time_label
            text: "00:00"
            size_hint_x: None
            width: 50

        Label:
            id: total_time_label
            text: "/ 00:00"
            size_hint_x: None
            width: 50


    # 4. Action Bar
    BoxLayout:
        size_hint_y: None
        height: 50
        spacing: 5

        Button:
            text: "Previous"
            on_release: root.previous_song()

        Button:
            text: "Play/Pause"
            on_release: root.play()

        Button:
            text: "Next"
            on_release: root.next_song()

        Button:
            text: "Loop"
            on_release: root.toggle_loop()

        Button:
            text: "Repeat"
            on_release: root.toggle_repeat()

        Button:
            text: "Playlist"
            on_release: root.open_playlist()

        BoxLayout:
            orientation: "vertical"

            # Settings button
            Button:
                text: "Settings"
                on_release: root.dropdown_settings.open(self)  # Opens dropdown

        # Define the dropdown menu (hidden by default)
        DropDown:
            id: dropdown_settings
            on_select: root.on_dropdown_settings_select(args[1])  # Calls the function when an option is selected

            Button:
                text: "Browse"
                size_hint_y: None
                height: 40
                on_release: dropdown_settings.select(self.text)

            Button:
                text: "Cloud"
                size_hint_y: None
                height: 40
                on_release: dropdown_settings.select(self.text)

            Button:
                text: "Upload"
                size_hint_y: None
                height: 40
                on_release: dropdown_settings.select(self.text)

            Button:
                text: "Search"
                size_hint_y: None
                height: 40
                on_release: dropdown_settings.select(self.text)

    # 5. Music List + Next Song
    BoxLayout:
        orientation: "horizontal"

        RecycleView:
            id: music_list
            viewclass: "MusicItem"  # Links to the custom RecycleView entry
            size_hint_x: 0.66
            size_hint_y: 0.8

            RecycleBoxLayout:
                default_size: None, dp(40)
                default_size_hint: 1, None
                size_hint_y: None
                height: self.minimum_height
                orientation: "vertical"

        BoxLayout:
            orientation: "vertical"
            size_hint_x: 0.33
            Label:
                text: "Next Song"
                font_size: 18
                size_hint_y: None
                height: 40

<MusicItem@Button>:
    size_hint_y: None
    height: 40
