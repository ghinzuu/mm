<PlayerUI>:
    orientation: "vertical"
    padding: 10
    spacing: 10

    # 1. Title Status Bar
    Label:
        id: title_status
        text: "Select a song"
        font_size: 20
        size_hint_y: None
        height: 40

    # 2Ô∏è. Metadata Grid
    GridLayout:
        cols: 3
        spacing: 5
        size_hint_y: None
        height: 120

        # Column 1 - First set of labels & text inputs
        BoxLayout:
            orientation: "vertical"
            size_hint_x: 1/3
            spacing: 5

            BoxLayout:
                Label:
                    text: "Title:"
                    size_hint_x: 0.3
                TextInput:
                    id: title_input
                    size_hint_x: 0.7

            BoxLayout:
                Label:
                    text: "Artist:"
                    size_hint_x: 0.3
                TextInput:
                    id: artist_input
                    size_hint_x: 0.7

            BoxLayout:
                Label:
                    text: "Album:"
                    size_hint_x: 0.3
                TextInput:
                    id: album_input
                    size_hint_x: 0.7

        # Column 2 - Second set of labels & text inputs
        BoxLayout:
            orientation: "vertical"
            size_hint_x: 1/3
            spacing: 5

            BoxLayout:
                Label:
                    text: "Genre:"
                    size_hint_x: 0.3
                TextInput:
                    id: genre_input
                    size_hint_x: 0.7

            BoxLayout:
                Label:
                    text: "Date:"
                    size_hint_x: 0.3
                TextInput:
                    id: date_input
                    size_hint_x: 0.7

            Button:
                id: edit_metadata
                text: "Edit Metadata"
                on_release: root.metadata_edit()

        # Column 3 - Full-height image
        Image:
            id: cover
            source: "frontend/img/music.png"
            size_hint_x: 1/3
            size_hint_y: 1
            size: 100, 120

    # 3. Slider Row
    BoxLayout:
        size_hint_y: None
        height: 50
        spacing: 10

        Slider:
            id: progress_slider
            min: 0
            max: 100
            on_touch_up: root.seek_in_song(self, args[1])

        Label:
            id: current_time_label
            text: "00:00"
            size_hint_x: None
            width: 50

        Label:
            id: total_time_label
            text: "/ 00:00"
            size_hint_x: None
            width: 50

    # 4. Action Bar
    BoxLayout:
        size_hint_y: None
        height: 50
        spacing: 3

        Button:
            text: "Previous"
            on_release: root.previous_song()

        Button:
            text: "Play/Pause"
            on_release: root.play()

        Button:
            text: "Next"
            on_release: root.next()

        Button:
            text: "Loop"
            on_release: root.toggle_loop()

        Button:
            text: "Repeat"
            on_release: root.toggle_repeat()

        Button:
            text: "Playlist"
            on_release: root.open_playlist()

        BoxLayout:
            orientation: "vertical"

            # Settings button
            Button:
                text: "Settings"
                on_release: root.dropdown_settings.open(self)  # Opens dropdown

        # Define the dropdown menu (hidden by default)
        DropDown:
            id: dropdown_settings
            on_select: root.on_dropdown_settings_select(args[1])  # Calls the function when an option is selected

            Button:
                text: "Browse"
                size_hint_y: None
                height: 40
                on_release: dropdown_settings.select(self.text)

            Button:
                text: "Cloud"
                size_hint_y: None
                height: 40
                on_release: dropdown_settings.select(self.text)

            Button:
                text: "Upload"
                size_hint_y: None
                height: 40
                on_release: dropdown_settings.select(self.text)

            Button:
                text: "Search"
                size_hint_y: None
                height: 40
                on_release: dropdown_settings.select(self.text)

    # 5. Music List + Next Song
    BoxLayout:
        orientation: "horizontal"

        RecycleView:
            id: music_list
            viewclass: "MusicItem"  # Links to the custom RecycleView entry
            size_hint_x: 0.66
            size_hint_y: 0.8

            RecycleBoxLayout:
                default_size: None, dp(40)
                default_size_hint: 1, None
                size_hint_y: None
                height: self.minimum_height
                orientation: "vertical"

        BoxLayout:
            orientation: "vertical"
            size_hint_x: 0.33

            NextSongLabel:
                text: "Next Song"
                font_size: 18
                size_hint_y: None
                height: 40
                on_release: root.next()

            NextSongLabel:
                id: next_song_filepath
                text: "Filepath: None"
                font_size: 14
                size_hint_y: None
                height: 30
                on_release: root.next()

            NextSongLabel:
                id: next_song_title
                text: "Title: None"
                font_size: 14
                size_hint_y: None
                height: 30
                on_release: root.next()

            NextSongLabel:
                id: next_song_artist
                text: "Artist: None"
                font_size: 14
                size_hint_y: None
                height: 30
                on_release: root.next()

            NextSongImage:
                id: next_song_cover
                source: "frontend/img/music.png"
                size_hint: None, None
                size: dp(100), dp(100)
                pos_hint: {"center_x": 0.5}
                on_release: root.next()


<MusicItem@Button>:
    size_hint_y: None
    height: 40

<NextSongLabel@ButtonBehavior+Label>:


<NextSongImage@ButtonBehavior+Image>:



